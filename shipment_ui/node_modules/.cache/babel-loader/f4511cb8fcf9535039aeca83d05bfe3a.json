{"ast":null,"code":"import _regeneratorRuntime from\"/home/gaurava/work/learning/react/shipment/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gaurava/work/learning/react/shipment/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/gaurava/work/learning/react/shipment/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/gaurava/work/learning/react/shipment/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/gaurava/work/learning/react/shipment/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/gaurava/work/learning/react/shipment/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/gaurava/work/learning/react/shipment/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import GenerateSignatures from\"../contract/CreateSignature\";import{IsValidSignature}from\"../contract/contract_transaction\";import{FetchAccount}from\"./MetaMaskFetch\";// import { toast } from \"react-toastify\";\nvar axios=require('axios');var CreateTransaction=/*#__PURE__*/function(_React$Component){_inherits(CreateTransaction,_React$Component);function CreateTransaction(){var _getPrototypeOf2;var _this;_classCallCheck(this,CreateTransaction);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CreateTransaction)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={errors:'',channelId:'',aliceCash:'',bobCash:'',lastState:localStorage.getItem(_this.props.channelId+'lastState')||[\"channelId\",\"0\",\"AliceCash\",\"BobCash\",\"Signature\"]};_this.onChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",_this.setState({'lastState':event.target.value}));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleConfirmChannel=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var sig,sender,resp1;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_this.setState({'errors':\"\"});if(!Number.isNaN(parseInt(_this.state.aliceCash,10))){_context2.next=6;break;}_this.setState({'errors':\"Enter Integer amount(in wei unit)\"});_context2.next=23;break;case 6:if(!Number.isNaN(parseInt(_this.state.bobCash,10))){_context2.next=10;break;}_this.setState({'errors':\"Enter Integer amount(in wei unit)\"});_context2.next=23;break;case 10:sig='0x0c588045f26dfa608d405ee0511dd3877800fd60933f87767c6906d37cad13786afd90b9df4d8b07d448c7b599c1e47a41ed1c12c01c4a57cbedb15cdc42a0791c';_context2.next=13;return FetchAccount();case 13:sender=_context2.sent;_context2.t0=console;_context2.next=17;return IsValidSignature(sender,0,1,1,sig);case 17:_context2.t1=_context2.sent;_context2.t0.log.call(_context2.t0,_context2.t1);_context2.next=21;return axios.get('localhost:3000/signature/',{params:{signature:sig}});case 21:resp1=_context2.sent;console.log(resp1.data);// console.log(await GenerateSignatures(this.state.lastState[1], this.state.aliceCash, this.state.bobCash))\n// ChannelConfirm(this.state.channelId, this.state.amount)\ncase 23:_this.setState({'aliceCash':\"\"});_this.setState({'bobCash':\"\"});case 25:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();return _this;}_createClass(CreateTransaction,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"h2\",null,\"Channel Details\"),React.createElement(\"div\",null,React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Hello React with Local Storage!\"),React.createElement(\"p\",null,this.state.lastState)),React.createElement(\"form\",{onSubmit:this.handleConfirmChannel},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"Count\"},\"Count\"),React.createElement(\"div\",{className:\"field\"},React.createElement(\"input\",{id:\"Count\",readOnly:true,type:\"text\",name:\"Count\",className:\"form-control\",value:this.state.lastState[1]}))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"aliceCash\"},\"Alice Cash\"),React.createElement(\"div\",{className:\"field\"},React.createElement(\"input\",{id:\"aliceCash\",type:\"text\",onChange:function onChange(event){return _this2.setState({aliceCash:event.target.value});},name:\"aliceCash\",className:\"form-control\",value:this.state.aliceCash}))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"bobCash\"},\"Bob Cash\"),React.createElement(\"div\",{className:\"field\"},React.createElement(\"input\",{id:\"bobCash\",type:\"text\",onChange:function onChange(event){return _this2.setState({bobCash:event.target.value});},name:\"bobCash\",className:\"form-control\",value:this.state.bobCash})),this.state.errors&&React.createElement(\"div\",{className:\"alert alert-danger\"},this.state.errors)),React.createElement(\"input\",{type:\"submit\",value:\"Submit Transaction\",className:\"btn btn-primary\"}))));}}]);return CreateTransaction;}(React.Component);;export default CreateTransaction;","map":{"version":3,"sources":["/home/gaurava/work/learning/react/shipment/src/components/CreateTransaction.js"],"names":["React","GenerateSignatures","IsValidSignature","FetchAccount","axios","require","CreateTransaction","state","errors","channelId","aliceCash","bobCash","lastState","localStorage","getItem","props","onChange","event","setState","target","value","handleConfirmChannel","preventDefault","Number","isNaN","parseInt","sig","sender","console","log","get","params","signature","resp1","data","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport GenerateSignatures from \"../contract/CreateSignature\";\nimport { IsValidSignature } from \"../contract/contract_transaction\";\nimport { FetchAccount } from \"./MetaMaskFetch\";\n// import { toast } from \"react-toastify\";\nconst axios = require('axios');\n\nclass CreateTransaction extends React.Component {\n    state = {\n        errors: '',\n        channelId: '',\n        aliceCash: '',\n        bobCash: '',\n        lastState: localStorage.getItem(this.props.channelId + 'lastState') || [\n            \"channelId\",\n            \"0\",\n            \"AliceCash\",\n            \"BobCash\",\n            \"Signature\"\n        ]\n    }\n\n    // const [course, setCourse] = useState({\n    //     channelId: \"\",\n    //     count: \"\",\n    //     AliceCash: \"\",\n    //     BobCash: \"\",\n    //     Signature: \"\"\n    // });\n    // localStorage.setItem(props.channelId + 'lastState', lastState);\n\n    onChange = async (event) => this.setState({ 'lastState': event.target.value });\n\n    handleConfirmChannel = async (event) => {\n        event.preventDefault();\n        this.setState({ 'errors': \"\" })\n        if (Number.isNaN(parseInt(this.state.aliceCash, 10))) {\n            this.setState({ 'errors': \"Enter Integer amount(in wei unit)\" })\n        }\n        else if (Number.isNaN(parseInt(this.state.bobCash, 10))) {\n            this.setState({ 'errors': \"Enter Integer amount(in wei unit)\" })\n        }\n        else {\n            let sig = '0x0c588045f26dfa608d405ee0511dd3877800fd60933f87767c6906d37cad13786afd90b9df4d8b07d448c7b599c1e47a41ed1c12c01c4a57cbedb15cdc42a0791c'\n            let sender = await FetchAccount()\n            console.log(await IsValidSignature(sender, 0, 1, 1, sig))\n            const resp1 = await axios.get('localhost:3000/signature/', {\n                params: {\n                    signature: sig,\n                }\n            });\n            console.log(resp1.data)\n            // console.log(await GenerateSignatures(this.state.lastState[1], this.state.aliceCash, this.state.bobCash))\n            // ChannelConfirm(this.state.channelId, this.state.amount)\n        }\n        this.setState({ 'aliceCash': \"\" })\n        this.setState({ 'bobCash': \"\" })\n\n\n    }\n\n    render() {\n        return (\n            <div>\n                <h2>Channel Details</h2>\n                <div>\n                    <div>\n                        <h1>Hello React with Local Storage!</h1>\n                        <p>{this.state.lastState}</p>\n                    </div>\n                    <form onSubmit={this.handleConfirmChannel}>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"Count\">Count</label>\n                            <div className=\"field\">\n                                <input\n                                    id=\"Count\"\n                                    readOnly\n                                    type=\"text\"\n                                    name=\"Count\"\n                                    className=\"form-control\"\n                                    value={this.state.lastState[1]}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"aliceCash\">Alice Cash</label>\n                            <div className=\"field\">\n                                <input\n                                    id=\"aliceCash\"\n                                    type=\"text\"\n                                    onChange={event => this.setState({ aliceCash: event.target.value })}\n                                    name=\"aliceCash\"\n                                    className=\"form-control\"\n                                    value={this.state.aliceCash}\n                                />\n                            </div>\n                            {/* {this.state.amountError && <div className=\"alert alert-danger\">{this.state.amountError}</div>} */}\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"bobCash\">Bob Cash</label>\n                            <div className=\"field\">\n                                <input\n                                    id=\"bobCash\"\n                                    type=\"text\"\n                                    onChange={event => this.setState({ bobCash: event.target.value })}\n                                    name=\"bobCash\"\n                                    className=\"form-control\"\n                                    value={this.state.bobCash}\n                                />\n                            </div>\n                            {this.state.errors && <div className=\"alert alert-danger\">{this.state.errors}</div>}\n                        </div>\n                        <input type=\"submit\" value=\"Submit Transaction\" className=\"btn btn-primary\" />\n                    </form>\n                </div>\n            </div >\n        );\n    }\n};\n\nexport default CreateTransaction;\n"]},"metadata":{},"sourceType":"module"}